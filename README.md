# MIT Music Production Collaborative

## Documentation

The website is statically generated by Jekyll. It (currently) must be manually built before deployment.
There is only one page. The artist box and marquee compoments are located in `/_includes`. Join links
and artist data is located in `/_data`. There is one main stylesheet located under `/_sass`. Images are located at `/assets/images`.

Website files are located in `/site` once the website is built. Files from the old website are located in `/old` and are included when the site is built. For more information on how to use Jekyll and update the site, see the Jekyll documentation: https://jekyllrb.com/

The website is hosted on [scripts.mit.edu](https://scripts.mit.edu/). The mpc locker is administrated by the WebMoira list mpc-www. Log in to Athena, then ssh into scripts with `ssh -k mpc@scripts`. To set this up (only needs to be done once at repository creation), associate the repo and the website directory this way:

```bash
cd  /mit/mpc/web_scripts/
svn checkout https://github.com/reeceyang/mpc/trunk/site
# copy over old blog files
cp -r ~/web_scripts/oldsite/blog ~/web_scripts/site/old/blog
```

Files from the old website were also moved into `/web_scripts/oldsite`. scripts.mit.edu serves the website out of the `/site` folder. You should be able to update the site as follows (not tested yet):

```bash
cd /mit/mpc/web_scripts/site
svn update
# copy over old blog files
cp -r ~/web_scripts/oldsite/blog ~/web_scripts/site/old/blog
```

Most of the shell scripts are not up to date and may not work correctly.

## ~~TODO~~ (deprecated)
Pipeline for repo (travis-ci?)
* High
  * Contact form
  * EP (tbd. soundcloud/spotify embed)
  * config file (webmoira link, mpc dir)
* Low
  * Replace all python with lua filter
  * Exec page (headshots, socials embeds)
  * Figure out https://scripts.mit.edu/faq/41/
* Done
  * Figure out MIT hosting
  * Mailing list signup (manually)


## Notes

1. Test your changes locally
2. Commit and push changes to this repository `https://github.com/richardliutl/mpc.git`
3. Run `update.sh` to make http://mpc.mit.edu/ up-to-date with this repo.

```bash
echo MIT username:
read user
ssh -Kt $user@athena.dialup.mit.edu '
    cd /mit/mpc/web_scripts/site;
    svn update;
    /mit/mpc/web_scripts/site/blog/blogger.sh;
    bash -l
'
```

To set up tooling (pandoc) run tools.sh. Should be set up so that /tools and /site are siblings.

```bash
mkdir -p tools;
wget -qO- https://github.com/jgm/pandoc/releases/download/2.11.0.4/pandoc-2.11.0.4-linux-amd64.tar.gz | tar xvzf - --strip-components 1 -C ./tools/;
```